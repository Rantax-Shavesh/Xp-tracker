<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shadow XP Tracker</title>
  <style>
    body {
      background-color: #0a0a0a;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    h1 {
      color: #00bfff;
      margin-top: 20px;
    }

    .xp-box, .input-section, .leaderboard, .popup, .title-section, .avatar-section, .stats-section {
      margin: 20px auto;
      padding: 10px;
      max-width: 600px;
      background-color: #111;
      border-radius: 10px;
      box-shadow: 0 0 15px #00bfff33;
    }

    input[type="number"], input[type="text"] {
      padding: 5px;
      margin: 5px;
      width: 100px;
      background-color: #222;
      color: white;
      border: 1px solid #00bfff;
      border-radius: 5px;
    }

    button {
      padding: 8px 16px;
      margin: 5px;
      background-color: #00bfff;
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
    }

    .popup {
      background-color: #222;
      color: #0f0;
      border: 1px solid #0f0;
      margin-top: 10px;
    }

    .leaderboard-entry {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      border-bottom: 1px solid #00bfff55;
      background-color: #1a1a1a;
      border-radius: 5px;
      margin: 5px;
    }

    .side-menu {
      position: fixed;
      right: 10px;
      top: 100px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .side-menu button {
      width: 120px;
    }

    .currency {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: #111;
      padding: 10px;
      border: 2px solid #00bfff;
      border-radius: 10px;
      font-weight: bold;
    }

    select {
      background-color: #111;
      color: white;
      border: 1px solid #00bfff;
      padding: 5px;
    }

    .avatar-list span {
      cursor: pointer;
      font-size: 24px;
      margin: 0 5px;
    }

    .highlighted {
      border: 2px solid #0f0;
      padding: 2px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>Shadow XP Tracker</h1>

  <div class="currency">Shadow Coins: <span id="shadowCoins">0</span></div>

  <div class="input-section">
    <label>Username:</label>
    <input type="text" id="username" placeholder="Enter name" />
    
    <div class="avatar-section">
      <p><strong>Choose Your Avatar:</strong></p>
      <div class="avatar-list" id="avatarList">
        <span>üßô</span><span>üßë‚Äçüéì</span><span>üßù‚Äç‚ôÇÔ∏è</span><span>üßü</span><span>‚öîÔ∏è</span><span>üëë</span>
      </div>
    </div>

    <h2 id="displayUsername"></h2>
    <p id="title" class="title-section">Novice Shadow</p>

    <label>Push-ups:</label>
    <input type="number" id="pushups" max="100"/>
    <label>Squats:</label>
    <input type="number" id="squats" max="100"/>
    <label>Sit-ups:</label>
    <input type="number" id="situps" max="100"/>
    <label>Burpees:</label>
    <input type="number" id="burpees" max="100"/>

    <div>
      <button onclick="calculateXP()">Calculate XP</button>
      <button onclick="logExercise()">Log Exercise</button>
    </div>

    <div class="popup" id="xpPopup" style="display:none;"></div>
  </div>

  <div class="side-menu">
    <button onclick="openShop()">Shop</button>
    <button onclick="viewProgress()">View Progress</button>
    <button onclick="showAchievements()">Achievements</button>
    <button onclick="showQuests()">Daily Quests</button>
  </div>

  <div class="leaderboard">
    <h3>Leaderboard</h3>
    <select onchange="sortLeaderboard(this.value)">
      <option value="xp">Sort by XP</option>
      <option value="level">Sort by Level</option>
    </select>
    <div id="leaderboardList"></div>
    <button onclick="prevPage()">Previous</button>
    <button onclick="nextPage()">Next</button>
  </div>

  <!-- Placeholder for Shop, Progress, Achievements, Quests, etc. -->
  <div id="dynamicSection"></div>

  <script>
    let xp = 0, level = 1, legacyXP = 0, shadowCoins = 0;
    const leaderboard = [];
    let selectedAvatar = "";
    let currentPage = 0;
    const pageSize = 3;

    const titles = ["Novice Shadow", "Skilled Hunter", "Elite Warrior", "Legendary Knight", "Monarch"];
    const xpNeeded = level => 100 + (level - 1) * 50;

    document.querySelectorAll(".avatar-list span").forEach(el => {
      el.onclick = () => {
        document.querySelectorAll(".avatar-list span").forEach(s => s.classList.remove("highlighted"));
        el.classList.add("highlighted");
        selectedAvatar = el.textContent;
      };
    });

    function calculateXP() {
      const p = Math.min(100, parseInt(document.getElementById("pushups").value) || 0);
      const s = Math.min(100, parseInt(document.getElementById("squats").value) || 0);
      const si = Math.min(100, parseInt(document.getElementById("situps").value) || 0);
      const b = Math.min(100, parseInt(document.getElementById("burpees").value) || 0);
      const earnedXP = p * 2 + s * 2 + si * 1 + b * 3;
      xp += earnedXP;
      shadowCoins += Math.floor(earnedXP / 10);
      updateXP();
      showPopup(`+${earnedXP} XP Gained!`);
    }

    function logExercise() {
      const name = document.getElementById("username").value.trim() || "Anonymous";
      const existing = leaderboard.find(u => u.name === name);
      if (existing) {
        existing.xp = xp;
        existing.level = level;
        existing.title = getTitle();
        existing.avatar = selectedAvatar;
      } else {
        leaderboard.push({
          name, xp, level, title: getTitle(), avatar: selectedAvatar
        });
      }
      updateLeaderboard();
      document.getElementById("displayUsername").textContent = name;
    }

    function updateXP() {
      while (xp >= xpNeeded(level) && level < 100) {
        xp -= xpNeeded(level);
        level++;
      }
      if (level >= 100) {
        legacyXP += xp;
        xp = 0;
        document.body.style.backgroundColor = "#000016";
      }
      document.getElementById("shadowCoins").textContent = shadowCoins;
      document.getElementById("title").textContent = getTitle();
    }

    function getTitle() {
      if (level >= 100) return "Shadow Monarch";
      else if (level >= 80) return "Monarch";
      else if (level >= 60) return "Legendary Knight";
      else if (level >= 40) return "Elite Warrior";
      else if (level >= 20) return "Skilled Hunter";
      return "Novice Shadow";
    }

    function showPopup(msg) {
      const popup = document.getElementById("xpPopup");
      popup.textContent = msg;
      popup.style.display = "block";
      setTimeout(() => popup.style.display = "none", 3000);
    }

    function updateLeaderboard() {
      const list = document.getElementById("leaderboardList");
      list.innerHTML = "";
      const start = currentPage * pageSize;
      leaderboard.slice(start, start + pageSize).forEach(user => {
        const div = document.createElement("div");
        div.className = "leaderboard-entry";
        div.innerHTML = `<div>${user.avatar || "üë§"} ${user.name}<br><small>${user.title}</small></div><div>XP: ${user.xp}<br>Level: ${user.level}</div>`;
        list.appendChild(div);
      });
    }

    function sortLeaderboard(type) {
      if (type === "xp") leaderboard.sort((a, b) => b.xp - a.xp);
      else leaderboard.sort((a, b) => b.level - a.level);
      updateLeaderboard();
    }

    function prevPage() {
      if (currentPage > 0) {
        currentPage--;
        updateLeaderboard();
      }
    }

    function nextPage() {
      if ((currentPage + 1) * pageSize < leaderboard.length) {
        currentPage++;
        updateLeaderboard();
      }
    }

    function openShop() {
      document.getElementById("dynamicSection").innerHTML = `
        <div class="xp-box"><h3>In-Game Shop</h3>
        <p>Coming soon: Power-ups, Boosts, Titles, and Themes!</p></div>`;
    }

    function viewProgress() {
      document.getElementById("dynamicSection").innerHTML = `
        <div class="xp-box"><h3>Progress Chart</h3>
        <p>XP: ${xp} | Level: ${level} | Shadow Coins: ${shadowCoins}</p>
        <p>Legacy XP: ${legacyXP}</p></div>`;
    }

    function showAchievements() {
      document.getElementById("dynamicSection").innerHTML = `
        <div class="xp-box"><h3>Achievements</h3>
        <p>- First Log<br>- 500 XP Earned<br>- Reached Level 10<br>- Shadow Coins Collected</p></div>`;
    }

    function showQuests() {
      const quests = [
        "Complete 50 push-ups",
        "Earn 200 XP today",
        "Reach Level 5",
        "Collect 20 Shadow Coins",
        "Log 3 different exercises"
      ];
      document.getElementById("dynamicSection").innerHTML = `
        <div class="xp-box"><h3>Daily Quests</h3>
        <ul>${quests.map(q => `<li>${q}</li>`).join("")}</ul></div>`;
    }
  </script>
</body>
</html>
